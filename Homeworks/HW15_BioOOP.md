# HW 15.  Bio OOP

Мы чуть-чуть начали узнавать что такое ООП, давайте применем его к каким-нибудь биологическим задачам. Например, добавим его в наш мини-проект из прошлого семестра!


## Важный текст ❗️

Помните, у вас в прошлом семестре был репозиторий с вашими собственными биоинформатическими утилитами? Задание выполняется в этом вашем репозитории в виде пулл-реквеста. Все прошлые PR у вас должны были быть смерджены в ветку **main** (см. ДЗ 9). Если у вас не так - смерджте их сейчас.

0) Начните ветку HW15. 
1) Весь код из модулей нужно перенести в главный скрипт
3) Все функции переписываем в классы в соотвествии с заданиями ниже
4) Делаете PR в **main**

*Если вы учились ранее и восстановились, напишите мне*


## Задание 1: Abtract sequences

В прошлом семестре мы писали модуль для работы с различными биологическими последовательностями (ДНК, РНК, белки). Тогда это был просто набор функций и вам могло показаться, что все как-то плохо структурировано. Действительно, именно здесь идеально подходит ООП! Самое время заняться объединением данных и методов работы с ними. Особенно мы попрактикуем такие понятия, как *абстракция* и *полиморфизм*.

В своем главном скрипте:

Напишите **абстрактный** класс `BiologicalSequence`, который фиксирует следующий интерфейс:
+ Работа с функцией `len`
+ Возможность получать элементы по индексу и делать срезы последовательности
+ Вывод на печать в красивома виде и возможность конвертации в строку
+ Возможность проверить алфавит последовательности на корректность

Напишите класс `NucleicAcidSequence`:
+ Данный класс реализует интерфейс `BiologicalSequence`
+ Данный класс имеет методы `complement`, `reverse` и `reverse_complement`

Напишите классы наследники `NucleicAcidSequence`: `DNASequence` и `RNASequence`
+ `DNASequence` должен иметь метод `transcribe`, возвращающий транскрибированную РНК-последовательность
+ Данные классы не должны иметь <ins>публичных методов</ins> `complement` и ко., и метода для проверки алфавита, так как они уже реализованы в `NucleicAcidSequence`.

Напишите класс `AminoAcidSequence`:
+ Данный класс реализует интерфейс `BiologicalSequence`
+ Добавьте этому классу один любой метод, подходящий по смыслу к аминокислотной последовательности. Можете взять любой из осеннего семестра, желательно не самый большой и не самый маленький (не длина белка, но и не выравниванитель).

### Несколько важных комментариев. 

1) Как вы понимаете, теперь функция `run_dna_rna_tools` вообще не нужна (ее просто ***нужно удалить***), а также не нужны функции-операции (их тоже ***нужно удалить***, но их содержание вы используете для рефакторинга в методы классов). Если у вас были любые другие операции, также добавьте их в методы классов там где они логичны быть

2) `NucleicAcidSequence.complement` должен быть реализован опредедённым образом:

    При вызове `dna.complement()` или условного `dna.check_alphabet()` должны будут вызываться соответствующие методы из `NucleicAcidSequence`. При этом, данный метод должен обладать свойством полиморфизма, иначе говоря, внутри `complement` не надо делать условия а-ля `if seuqence_type == "DNA": return self.complement_dna()`, это крайне не гибко. Данный метод должен опираться на какой-то общий интерфейс между ДНК и РНК. Создание экземпляров `NucleicAcidSequence` не подразумевается, поэтому код `NucleicAcidSequence("ATGC").complement()` не обязан работать, а в идеале должен кидать исключение `NotImplementedError` при вызове от экземпляра `NucleicAcidSequence`. 

3) Вся сложность задания в том, чтобы правильно организовать код. Если у вас есть повторяющийся код в сестринских классах или родительском и дочернем, значит вы что-то делаете не так.


4) По-хорошему, между классом `BiologicalSequence` и классами `NucleicAcidSequence` и `AminoAcidSequence`, ещё должен быть класс-прослойка, частично реализующий интерфейс `BiologicalSequence`, но его писать не обязательно, так как задание и так довольно большое (правда из-за этого у вас неминуемо возникнет повторяющийся код в классах `NucleicAcidSequence` и `AminoAcidSequence`)

5) В целом следите чтобы при обработке данных определенного типа (ДНК, белок, ... ) возвращался объект правильного типа (а не просто `str`).


**Баллы**:
- За каждый из 5-и классов `BiologicalSequence`, `NucleicAcidSequence`, `DNASequence`, `RNASequence`, `AminoAcidSequence` - по 5 баллов (в сумме **25 баллов**).




## Задание 2: FastQ-фильтратор с помощью Biopython

Писать свои классы конечно здорово (а еще полезно в учебных целях), но вообще обычно изобретать велосипеды не советуют. Мы писали целый модуль для работы с FastQ-файлами, хотя все это уже давно написано в библиотеке Biopython. Тогда мы его не трогали, потому что в биопитоне все написано через ООП. Сейчас самое время разобрать с тем как другие люди пишут и организуют свой ООП-код, ну и заодно дополнительно попрактиковаться с Biopython (ну и чтением документаций и исходников в целом).

В вашем скрипте напишите функцию `filter_fastq` (и любой остальной код) для фильтрации FastQ-файлов ровно так, как мы это делали в прошлом семестре (длина, качество, gc-состав), **но** с использованием классов и методов из библиотеки Biopython. Советую обратить внимание на такие вещи, как `SeqIO`, `SeqUtils`, `SeqRecord`. А еще на сайте биопитона прям есть Cookbook по которому раскиданы примеры работы с качеством, gc-составом и длиной. 

В результате ваш подмодуль с функциями для фильтрации тоже окажется ненужным. Его тоже ***нужно удалить***.

*Совет*: вы уже достаточно прошарены в питоне, иногда может быть проще почитать исходный код той или иной функции на [GitHub](https://github.com/biopython/biopython/tree/master/Bio) (используйте поиск), чем разбираться с документацией на сайте. 

**Баллы**: **20 баллов**


### Задание 3.

Кажется, надо немного актуализировать README :)

**Баллы**: **5 баллов**


### Общая разбалловка и требования

- Итого - 50 баллов.
- За проблемы с качеством кода можно **потерять до 10 баллов**. Обратите внимание на отступы, пробелы, наименования, аннотации типов - кода очень много, и все это имеет большое значение. Докстринги не обязательны, но могут поднять настроение проверяющим.
- Если импортируются сторонние библиотеки, они должны быть прописаны в `requirements.txt`!
- Не забудьте удалить все что нужно удалить!!! Никакого [легаси](https://thecode.media/legacy/) в наших проектах.

Удачи! ✨✨
